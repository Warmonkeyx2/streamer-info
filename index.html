<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Streamer Info</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- INFO BUBBLE AND MAIN NAV -->
  <div class="info-bubble">
    <div class="info-button" onclick="toggleCard()">i</div>
    <div class="info-card" id="infoCard">
      <nav class="top-nav internal-nav">
        <button onclick="showTab('homeTab')">HOME</button>
        <button onclick="showTab('serversTab')">SERVERS</button>
        <button onclick="showTab('appsTab')">APPS</button>
        <div class="settings-icon" onclick="toggleAdminPanel()">‚öôÔ∏è</div>
      </nav>

      <div class="tab-content" id="homeTab">
        <img src="assets/profile.png" alt="Profile" />
        <h3>WARMONKEYX</h3>
        <p>
          Witness the madness unfold under the freeway. From explosive dumpster deals and sketchy science experiments to mysterious rituals beneath the full moon ‚Äî WarmonkeyX delivers raw, unscripted RP that blends chaos with character-driven lore.
          <br><br>
          If you crave unpredictable storylines, gritty humor, and explosive moments, this is your new religion.
        </p>
        <div class="streamer-links" id="mainStreamerLinks">
          <!-- Links are dynamically filled by JS -->
        </div>
      </div>

      <div class="tab-content" id="serversTab" style="display: none;">
        <h3>Servers</h3>
        <p>Select your server type:</p>
        <div class="internal-nav" id="serverTypeButtons">
          <!-- Server type buttons dynamically generated by JS -->
        </div>
      </div>

      <div class="tab-content" id="gtaTab" style="display: none;">
        <h3>GTA RP Server</h3>
        <div id="gtaServerPanel"></div>
      </div>

      <div class="tab-content" id="redmTab" style="display: none;">
        <h3>RedM RP Server</h3>
        <div id="redmServerPanel"></div>
      </div>

      <div class="tab-content" id="appsTab" style="display: none;"> 
        <h3>Apps</h3>
        <p>Select a viewer app to open:</p>
        <div class="app-grid">
          <div class="app-icon" onclick="launchSolitaireApp()">
            <span>üÉè</span>
            <p>Solitaire</p>
          </div>
          <div class="app-icon" onclick="launchStatsApp()">
            <span>üìä</span>
            <p>Stats</p>
          </div>
          <div class="app-icon"><span>üì±</span><p>Mobile</p></div>
          <div class="app-icon"><span>üéÆ</span><p>Gaming</p></div>
          <div class="app-icon" id="streamingAppIcon" onclick="toggleAppsVisibilityControls()">
            <span>üé•</span>
            <p>Streaming</p>
          </div>
          <div class="app-icon"><span>üß™</span><p>Experiments</p></div>
        </div>
        <div class="apps-visibility-controls" style="display:none;">
          <h4>Show/Hide Dock Buttons</h4>
          <label><input type="checkbox" class="dock-toggle" data-dock="streamInfoPanel" /> Stream Info</label><br>
          <label><input type="checkbox" class="dock-toggle" data-dock="chatPanel" /> Chat</label><br>
          <label><input type="checkbox" class="dock-toggle" data-dock="pollPanel" /> Polls</label><br>
          <label><input type="checkbox" class="dock-toggle" data-dock="linksPanel" /> Links</label><br>
          <label><input type="checkbox" class="dock-toggle" data-dock="" /> Links</label><br>
          <label><input type="checkbox" class="dock-toggle" data-dock="customizeToggle" /> Customize</label><br>
          <button id="saveDockVisibility" style="margin-top: 12px;">Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- SERVER INFO PANEL (popout for logo/join) -->
  <div id="serverInfoPanel" class="panel" style="display:none; left:80px;">
    <div class="panel-header">
      <span id="serverInfoTitle"></span>
      <button class="close-btn" onclick="hidePanel('serverInfoPanel')">‚úñ</button>
    </div>
    <div class="panel-body" id="serverInfoBody"></div>
  </div>

  <!-- ADMIN PANEL -->
  <div class="admin-panel" style="display: none;">
    <div class="admin-header">
      <div class="admin-profile">
        <img src="assets/profile.png" alt="Profile" />
        <div class="admin-profile-info">
          <h3>WARMONKEYX</h3>
        </div>
      </div>
      <div class="admin-tabs">
        <button class="admin-tab active" onclick="showAdminSection('homeSettings')">HOME</button>
        <button class="admin-tab" onclick="showAdminSection('serverSettingsPanel')">SERVERS</button>
        <button class="admin-tab" onclick="showAdminSection('appsSettingsPanel')">APPS</button>
      </div>
    </div>
    <div class="admin-content">
      <div id="homeSettings" class="admin-section" style="display: block;">
        <h4>Streamer Settings</h4>
        <div class="admin-field">
          <label for="streamerNameInput">Streamer Name:</label>
          <input type="text" id="streamerNameInput" placeholder="Enter your streamer name" />
        </div>
        <div class="admin-field">
          <label for="streamerBioInput">Streamer Bio:</label>
          <textarea id="streamerBioInput" placeholder="Enter your bio..." rows="4"></textarea>
        </div>
        <div class="admin-field">
          <button onclick="updateStreamerInfo()">Save Info</button>
        </div>
        <div class="admin-field">
          <label for="profileImageUpload">Upload Profile Image:</label>
          <input type="file" id="profileImageUpload" accept="image/*" onchange="updateProfileImage(event)" />
        </div>
        <div class="admin-field">
          <label for="colorPicker">Theme Color:</label>
          <input type="color" id="colorPicker" onchange="updateThemeColor(this.value)" />
        </div>
        <div class="admin-field">
          <button id="toggleLinkSettings" onclick="toggleLinkSettings()">Toggle Streamer Links</button>
        </div>
        <div id="linkSettingsContainer" style="display: none;">
          <div class="link-setting">
            <label><input type="checkbox" id="twitchCheck" /> Twitch:</label>
            <input type="url" id="twitchURL" value="https://twitch.tv/warmonkeyx" />
          </div>
          <div class="link-setting">
            <label><input type="checkbox" id="youtubeCheck" /> YouTube:</label>
            <input type="url" id="youtubeURL" value="https://youtube.com/@warmonkeyx" />
          </div>
          <div class="link-setting">
            <label><input type="checkbox" id="kickCheck" /> Kick:</label>
            <input type="url" id="kickURL" value="https://kick.com/warmonkeyx" />
          </div>
          <div class="link-setting">
            <label><input type="checkbox" id="discordCheck" /> Discord:</label>
            <input type="url" id="discordURL" value="https://discord.gg/ANvfmFFwUS" />
          </div>
          <div class="link-setting">
            <label><input type="checkbox" id="tiktokCheck" /> TikTok:</label>
            <input type="url" id="tiktokURL" value="https://www.tiktok.com/@warmonkeyx" />
          </div>
          <div class="link-setting">
            <label><input type="checkbox" id="donateCheck" /> Donate:</label>
            <input type="url" id="donateURL" value="https://streamelements.com/warmonkeyx/tip" />
          </div>
          <div class="admin-field">
            <button onclick="updateStreamerLinks()">Save Streamer Links</button>
          </div>
        </div>
      </div>
      <div id="serverSettingsPanel" class="admin-section" style="display: none;">
        <h3>Server Settings</h3>
        <p>Edit your server types below. Toggle visibility to show/hide them as buttons.</p>
        <div class="server-type-grid">
          <!-- Slot 1 -->
          <div class="server-type-card">
            <label>Server Name:</label>
            <input type="text" class="server-type-label" placeholder="e.g. GTA RP" value="GTA RP" />
            <label>Server Link:</label>
            <input type="url" class="server-type-url" placeholder="https://yourserver.com" />
            <label>Logo:</label>
            <input type="file" class="server-type-logo" accept="image/*" />
            <img class="server-type-logo-preview" src="" style="display:none; max-width:80px;"/>
            <label><input type="checkbox" class="server-type-visible" /> Show</label>
          </div>
          <!-- Slot 2 -->
          <div class="server-type-card">
            <label>Server Name:</label>
            <input type="text" class="server-type-label" placeholder="e.g. RedM RP" value="RedM RP" />
            <label>Server Link:</label>
            <input type="url" class="server-type-url" placeholder="https://yourserver.com" />
            <label>Logo:</label>
            <input type="file" class="server-type-logo" accept="image/*" />
            <img class="server-type-logo-preview" src="" style="display:none; max-width:80px;"/>
            <label><input type="checkbox" class="server-type-visible" /> Show</label>
          </div>
        </div>
        <button class="color-button" onclick="updateServerButtons()">Save Server Buttons</button>
      </div>
      <div id="appsSettingsPanel" class="admin-section" style="display: none;">
        <h3>Apps Settings</h3>
        <p>This section will allow you to manage which viewer-facing apps are available. Placeholder for now.</p>
        <ul>
          <li>üí° App Slot 1 - Placeholder</li>
          <li>üí° App Slot 2 - Placeholder</li>
          <li>üí° App Slot 3 - Placeholder</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- RESTORE BUTTON FOR SOLITAIRE -->
  <button id="solitaireRestoreBtn" onclick="restoreSolitaire()" style="display: none;">üÉè</button>

  <!-- SOLITAIRE APP WINDOW -->
  <div id="solitaireWindow" class="app-window" style="display: none;">
    <div class="app-window-header" onmousedown="startDrag(event)">
      <div class="app-window-title">
        <img src="assets/solitaire-icon.png" alt="Solitaire Icon" style="width: 24px; margin-right: 8px;" />
        Solitaire
      </div>
      <div class="app-window-actions">
        <button onclick="closeAppWindow()" title="Minimize">‚≠ò</button>
        <button onclick="closeAppWindow()" title="Close">‚úñ</button>
      </div>
    </div>
    <div class="app-window-body" id="solitaireGameContainer">
      <!-- Solitaire game loads here -->
    </div>
  </div>
<!--
  ===============================
  Gaming Tab - Twitch Bits Games
  ===============================
  This section displays all Twitch Bits-powered games and extensions as individual panels.
  Each game/extension has its own neon-glow styled panel and button.
  You can wire up each button with JavaScript to launch or interact with the respective game.
  For custom games like Bit-Pet, add a new panel in the same style.
-->

<div id="gamingTab" class="tab-content">
  <!-- Tab Title -->
  <h2>Gaming</h2>
  <div class="game-panels">

    <!-- ===== Mini-Games Section ===== -->
    <div class="game-section">
      <h3>Mini-Games</h3>
      <div class="game-grid">
        <!-- Slots Game Panel -->
        <div class="game-panel neon">
          <!-- Button to trigger Slots game logic -->
          <button class="game-btn neon-btn" id="slotsBtn">Slots</button>
          <p>Spin for prizes using Bits!</p>
        </div>
        <!-- Dice Roll Game Panel -->
        <div class="game-panel neon">
          <!-- Button to trigger Dice Roll game logic -->
          <button class="game-btn neon-btn" id="diceBtn">Dice Roll</button>
          <p>Roll for random rewards using Bits!</p>
        </div>
        <!-- Wheel Spin Game Panel -->
        <div class="game-panel neon">
          <!-- Button to trigger Wheel Spin game logic -->
          <button class="game-btn neon-btn" id="wheelBtn">Wheel Spin</button>
          <p>Spin the wheel for bonuses or shoutouts!</p>
        </div>
      </div>
    </div>

    <!-- ===== Interactions Section ===== -->
    <div class="game-section">
      <h3>Interactions</h3>
      <div class="game-grid">
        <!-- Soundboard Panel -->
        <div class="game-panel neon">
          <!-- Button to trigger Soundboard extension -->
          <button class="game-btn neon-btn" id="soundboardBtn">Soundboard</button>
          <p>Play sounds on stream with Bits!</p>
        </div>
        <!-- Screen Animations Panel -->
        <div class="game-panel neon">
          <!-- Button to trigger Screen Animations logic -->
          <button class="game-btn neon-btn" id="screenAnimBtn">Screen Animations</button>
          <p>Trigger fireworks, memes, emotes with Bits!</p>
        </div>
        <!-- Polls Panel -->
        <div class="game-panel neon">
          <!-- Button to trigger Polls extension -->
          <button class="game-btn neon-btn" id="pollsBtn">Polls</button>
          <p>Vote in special polls using Bits!</p>
        </div>
      </div>
    </div>

    <!-- ===== Battle/PvP Section ===== -->
    <div class="game-section">
      <h3>Battle / PvP</h3>
      <div class="game-grid">
        <!-- Bits Battle Royale Panel -->
        <div class="game-panel neon">
          <!-- Button to trigger Battle Royale game logic -->
          <button class="game-btn neon-btn" id="battleRoyaleBtn">Bits Battle Royale</button>
          <p>Spend Bits to enter; last one standing wins!</p>
        </div>
        <!-- Boss Fight Panel -->
        <div class="game-panel neon">
          <!-- Button to trigger Boss Fight game logic -->
          <button class="game-btn neon-btn" id="bossFightBtn">Boss Fight</button>
          <p>Use Bits to team up and defeat a boss!</p>
        </div>
      </div>
    </div>

    <!-- ===== Official Extensions Section ===== -->
    <div class="game-section">
      <h3>Official Extensions</h3>
      <div class="game-grid">
        <!-- Crowd Control Panel -->
        <div class="game-panel neon">
          <!-- Button to launch Crowd Control extension -->
          <button class="game-btn neon-btn" id="crowdControlBtn">Crowd Control</button>
          <p>Bits change gameplay -- spawn enemies, rules, etc.</p>
        </div>
        <!-- Sound Alerts Panel -->
        <div class="game-panel neon">
          <!-- Button to launch Sound Alerts extension -->
          <button class="game-btn neon-btn" id="soundAlertsBtn">Sound Alerts</button>
          <p>Bits play custom sounds on stream.</p>
        </div>
        <!-- Bit Arcade Panel -->
        <div class="game-panel neon">
          <!-- Button to launch Bit Arcade extension -->
          <button class="game-btn neon-btn" id="bitArcadeBtn">Bit Arcade</button>
          <p>Classic arcade mini-games for Bits.</p>
        </div>
        <!-- Kappa Casino Panel -->
        <div class="game-panel neon">
          <!-- Button to launch Kappa Casino extension -->
          <button class="game-btn neon-btn" id="kappaCasinoBtn">Kappa Casino</button>
          <p>Casino-style Bits games.</p>
        </div>
      </div>
    </div>

    <!-- ===== Custom Game Example: Bit-Pet =====
    <div class="game-section">
      <h3>Custom Games</h3>
      <div class="game-grid">
        <div class="game-panel neon">
          <button class="game-btn neon-btn" id="bitPetBtn">Bit-Pet</button>
          <p>Care for your virtual pet with Bits! (Coming Soon)</p>
        </div>
      </div>
    </div>
    ===== End Custom Game Example ===== -->

  </div>
</div>
  <!-- STATS APP WINDOW -->
  <div id="statsWindow" class="app-window" style="display: none; position: absolute; top: 200px; left: 300px;">
    <div class="app-window-header" onmousedown="startDrag(event)">
      <span>üìä Stats</span>
      <div style="margin-left: auto; display: flex; gap: 10px;">
        <button onclick="closeStatsWindow()" style="color: red;">‚≠ò</button>
        <button onclick="closeStatsWindow()">‚úñ</button>
      </div>
    </div>
    <!-- Custom Stats Panel -->
    <div class="custom-stats-panel" id="customStatsPanel">
      <h4>Choose Your Stats</h4>
      <form id="statsPrefsForm">
        <label><input type="checkbox" name="followage" /> Followed Since</label><br>
        <label><input type="checkbox" name="channelPoints" /> Channel Points</label><br>
        <label><input type="checkbox" name="messagesSent" /> Messages Sent</label><br>
        <label><input type="checkbox" name="badges" /> Badges</label><br>
        <label><input type="checkbox" name="subStatus" /> Sub Status</label><br>
        <label><input type="checkbox" name="viewerNumber" /> Viewer Number</label><br>
        <button type="submit">Save & Show</button>
        <button type="button" onclick="closeCustomStats()">Cancel</button>
      </form>
    </div>
    <div class="app-window-body" id="statsAppContainer" style="background-color: #000; color: #0f0; font-family: 'Fira Mono', monospace;">
      <div id="welcomeMessage" style="margin-bottom: 12px;"></div>
      <div id="cmdTerminal"></div>
      <div style="margin-top: 12px;">
        <button onclick="showBasicStats()">Get Stats</button>
        <button onclick="openCustomStats()">Custom Stats</button>
      </div>
    </div>
  </div>

  <!-- DOCK BAR -->
  <div id="dockBar">
    <button class="dock-btn" data-panel="streamInfoPanel" title="Stream Info">üé¨</button>
    <button class="dock-btn" data-panel="chatPanel" title="Chat">üí¨</button>
    <button class="dock-btn" data-panel="pollPanel" title="Polls">üìä</button>
    <button class="dock-btn" data-panel="linksPanel" title="Links">üîó</button>
    <button class="dock-btn" data-panel="freeModePanel" id="freeModeDockBtn" title="FreeMode">üñ•Ô∏è</button>
    <button id="customizeToggle" title="Customize Layout">üõ†Ô∏è</button>
  </div>

  <!-- PANELS -->
<!-- Stream Info Panel -->
<div id="streamInfoPanel" class="panel" style="left: 60px; display: none;">
  <div class="panel-header">Stream Info <button class="close-btn" data-panel="streamInfoPanel">‚úñ</button></div>
  <div class="panel-body" id="streamInfoBody"></div>
</div>

<!-- Chat Panel -->
<div id="chatPanel" class="panel" style="left: 60px; display: none;">
  <div class="panel-header">Chat <button class="close-btn" data-panel="chatPanel">‚úñ</button></div>
  <div class="panel-body" id="chatBody">(Chat goes here)</div>
</div>

<!-- Poll Panel -->
<div id="pollPanel" class="panel" style="left: 60px; display: none;">
  <div class="panel-header">Polls <button class="close-btn" data-panel="pollPanel">‚úñ</button></div>
  <div class="panel-body" id="pollBody">(Polls go here)</div>
</div>

<!-- Links Panel -->
<div id="linksPanel" class="panel" style="left: 60px; display: none;">
  <div class="panel-header">Links <button class="close-btn" data-panel="linksPanel">‚úñ</button></div>
  <div class="panel-body">
    <ul class="links-list" id="popoutLinksList">
      <!-- Links will be dynamically inserted here -->
    </ul>
  </div>
</div>

<!-- FreeMode Panel (MUST be outside linksPanel, at root level) -->
<div id="freeModePanel" class="panel" style="display:none; left:140px; top:80px; min-width:360px;">
  <div class="panel-header" onmousedown="startDrag(event)">FreeMode
    <button class="close-btn" data-panel="freeModePanel">‚úñ</button>
  </div>
  <div class="panel-body" id="freeModeBody">
    <div style="margin-bottom:10px;">Drag and resize this panel! Click "Show Stream" below to open your Twitch stream.</div>
    <button id="showTwitchEmbedBtn" onclick="toggleTwitchEmbed()" style="margin-bottom:8px;">Show Stream</button>
    <div id="twitchEmbedPanel" style="display:none; resize:both; overflow:auto; min-width:320px; min-height:180px; border-radius:12px; box-shadow:0 0 8px #00fff7;"></div>
  </div>
</div>
        <!-- Links will be dynamically inserted here -->
      </ul>
    </div>
  </div>

  <script src="script.js"></script>
  <!-- --- INLINE SCRIPT SECTION: Streaming Button, Dock Toggle Controls --- -->
  <script>
    // --- Toggle Apps Visibility Controls when Streaming button is clicked ---
    function toggleAppsVisibilityControls() {
      const controls = document.querySelector('.apps-visibility-controls');
      if (controls) {
        controls.style.display = (controls.style.display === 'none' || controls.style.display === '') ? 'block' : 'none';
      }
    }

    // --- Viewer Dock Button Visibility Toggles ---
    function loadDockVisibilityPrefs() {
      const prefs = JSON.parse(localStorage.getItem("dockVisibilityPrefs") || "{}");
      document.querySelectorAll('.dock-toggle').forEach(toggle => {
        const dockId = toggle.getAttribute('data-dock');
        toggle.checked = prefs[dockId] !== false;
        updateDockButtonVisibility(dockId, toggle.checked);
        toggle.addEventListener('change', function () {
          updateDockButtonVisibility(dockId, toggle.checked);
          saveDockVisibilityPrefs();
        });
      });
    }

    function updateDockButtonVisibility(dockId, show) {
      const btn = dockId === "customizeToggle"
        ? document.getElementById("customizeToggle")
        : document.querySelector('.dock-btn[data-panel="'+dockId+'"]');
      if (btn) btn.style.display = show ? "" : "none";
    }

    function saveDockVisibilityPrefs() {
      const prefs = {};
      document.querySelectorAll('.dock-toggle').forEach(toggle => {
        const dockId = toggle.getAttribute('data-dock');
        prefs[dockId] = toggle.checked;
      });
      localStorage.setItem("dockVisibilityPrefs", JSON.stringify(prefs));
    }

    // --- Initialize dock visibility toggles on page load ---
    window.addEventListener("DOMContentLoaded", loadDockVisibilityPrefs);
  </script>
  <!-- --- END INLINE SCRIPT SECTION --- -->

</body>
</html>
