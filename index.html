<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Streamer Info</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- INFO BUBBLE AND MAIN NAV -->
  <div class="info-bubble">
    <div class="info-button" onclick="toggleCard()">i</div>
    <div class="info-card" id="infoCard">
      <nav class="top-nav internal-nav">
        <button onclick="showTab('homeTab')">HOME</button>
        <button onclick="showTab('serversTab')">SERVERS</button>
        <button onclick="showTab('appsTab')">APPS</button>
        <div class="settings-icon" onclick="toggleAdminPanel()">âš™ï¸</div>
      </nav>

      <div class="tab-content" id="homeTab">
        <img src="assets/profile.png" alt="Profile" />
        <h3>WARMONKEYX</h3>
        <p>
          Witness the madness unfold under the freeway. From explosive dumpster deals and sketchy science experiments to mysterious rituals beneath the full moon â€” WarmonkeyX delivers raw, unscripted RP that blends chaos with character-driven lore.
          <br><br>
          If you crave unpredictable storylines, gritty humor, and explosive moments, this is your new religion.
        </p>
        <div class="streamer-links" id="mainStreamerLinks">
          <!-- Links are dynamically filled by JS -->
        </div>
      </div>

      <div class="tab-content" id="serversTab" style="display: none;">
        <h3>Servers</h3>
        <p>Select your server type:</p>
        <div class="internal-nav" id="serverTypeButtons">
          <!-- Server type buttons dynamically generated by JS -->
        </div>
      </div>

      <div class="tab-content" id="gtaTab" style="display: none;">
        <h3>GTA RP Server</h3>
        <div id="gtaServerPanel"></div>
      </div>

      <div class="tab-content" id="redmTab" style="display: none;">
        <h3>RedM RP Server</h3>
        <div id="redmServerPanel"></div>
      </div>

      <div class="tab-content" id="appsTab" style="display: none;"> 
        <h3>Apps</h3>
        <p>Select a viewer app to open:</p>
        <div class="app-grid">
          <div class="app-icon" onclick="launchSolitaireApp()">
            <span>ğŸƒ</span>
            <p>Solitaire</p>
          </div>
          <div class="app-icon" onclick="launchStatsApp()">
            <span>ğŸ“Š</span>
            <p>Stats</p>
          </div>
          <div class="app-icon"><span>ğŸ“±</span><p>Mobile</p></div>
          <!-- Gaming App Icon with Popup -->
          <div class="app-icon" id="gamingAppIcon">
            <span>ğŸ®</span>
            <p>Gaming</p>
          </div>
          <div class="app-icon" id="streamingAppIcon" onclick="toggleAppsVisibilityControls()">
            <span>ğŸ¥</span>
            <p>Streaming</p>
          </div>
          <div class="app-icon"><span>ğŸ§ª</span><p>Experiments</p></div>
        </div>
        <div class="apps-visibility-controls" style="display:none;">
          <h4>Show/Hide Dock Buttons</h4>
          <label><input type="checkbox" class="dock-toggle" data-dock="streamInfoPanel" /> Stream Info</label><br>
          <label><input type="checkbox" class="dock-toggle" data-dock="chatPanel" /> Chat</label><br>
          <label><input type="checkbox" class="dock-toggle" data-dock="pollPanel" /> Polls</label><br>
          <label><input type="checkbox" class="dock-toggle" data-dock="linksPanel" /> Links</label><br>
          <label><input type="checkbox" class="dock-toggle" data-dock="" /> Links</label><br>
          <label><input type="checkbox" class="dock-toggle" data-dock="customizeToggle" /> Customize</label><br>
          <button id="saveDockVisibility" style="margin-top: 12px;">Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- SERVER INFO PANEL (popout for logo/join) -->
  <div id="serverInfoPanel" class="panel" style="display:none; left:80px;">
    <div class="panel-header">
      <span id="serverInfoTitle"></span>
      <button class="close-btn" onclick="hidePanel('serverInfoPanel')">âœ–</button>
    </div>
    <div class="panel-body" id="serverInfoBody"></div>
  </div>

  <!-- ADMIN PANEL -->
  <div class="admin-panel" style="display: none;">
    <div class="admin-header">
      <div class="admin-profile">
        <img src="assets/profile.png" alt="Profile" />
        <div class="admin-profile-info">
          <h3>WARMONKEYX</h3>
        </div>
      </div>
      <div class="admin-tabs">
        <button class="admin-tab active" onclick="showAdminSection('homeSettings')">HOME</button>
        <button class="admin-tab" onclick="showAdminSection('serverSettingsPanel')">SERVERS</button>
        <button class="admin-tab" onclick="showAdminSection('appsSettingsPanel')">APPS</button>
        <button class="admin-tab" onclick="showAdminSection('gameControlPanel')">GAME CONTROL</button>
      </div>
    </div>
    <div class="admin-content">
      <div id="homeSettings" class="admin-section" style="display: block;">
        <h4>Streamer Settings</h4>
        <div class="admin-field">
          <label for="streamerNameInput">Streamer Name:</label>
          <input type="text" id="streamerNameInput" placeholder="Enter your streamer name" />
        </div>
        <div class="admin-field">
          <label for="streamerBioInput">Streamer Bio:</label>
          <textarea id="streamerBioInput" placeholder="Enter your bio..." rows="4"></textarea>
        </div>
        <div class="admin-field">
          <button onclick="updateStreamerInfo()">Save Info</button>
        </div>
        <div class="admin-field">
          <label for="profileImageUpload">Upload Profile Image:</label>
          <input type="file" id="profileImageUpload" accept="image/*" onchange="updateProfileImage(event)" />
        </div>
        <div class="admin-field">
          <label for="colorPicker">Theme Color:</label>
          <input type="color" id="colorPicker" onchange="updateThemeColor(this.value)" />
        </div>
        <div class="admin-field">
          <button id="toggleLinkSettings" onclick="toggleLinkSettings()">Toggle Streamer Links</button>
        </div>
        <div id="linkSettingsContainer" style="display: none;">
          <div class="link-setting">
            <label><input type="checkbox" id="twitchCheck" /> Twitch:</label>
            <input type="url" id="twitchURL" value="https://twitch.tv/warmonkeyx" />
          </div>
          <div class="link-setting">
            <label><input type="checkbox" id="youtubeCheck" /> YouTube:</label>
            <input type="url" id="youtubeURL" value="https://youtube.com/@warmonkeyx" />
          </div>
          <div class="link-setting">
            <label><input type="checkbox" id="kickCheck" /> Kick:</label>
            <input type="url" id="kickURL" value="https://kick.com/warmonkeyx" />
          </div>
          <div class="link-setting">
            <label><input type="checkbox" id="discordCheck" /> Discord:</label>
            <input type="url" id="discordURL" value="https://discord.gg/ANvfmFFwUS" />
          </div>
          <div class="link-setting">
            <label><input type="checkbox" id="tiktokCheck" /> TikTok:</label>
            <input type="url" id="tiktokURL" value="https://www.tiktok.com/@warmonkeyx" />
          </div>
          <div class="link-setting">
            <label><input type="checkbox" id="donateCheck" /> Donate:</label>
            <input type="url" id="donateURL" value="https://streamelements.com/warmonkeyx/tip" />
          </div>
          <div class="admin-field">
            <button onclick="updateStreamerLinks()">Save Streamer Links</button>
          </div>
        </div>
      </div>
      <div id="serverSettingsPanel" class="admin-section" style="display: none;">
        <h3>Server Settings</h3>
        <p>Edit your server types below. Toggle visibility to show/hide them as buttons.</p>
        <div class="server-type-grid">
          <!-- Slot 1 -->
          <div class="server-type-card">
            <label>Server Name:</label>
            <input type="text" class="server-type-label" placeholder="e.g. GTA RP" value="GTA RP" />
            <label>Server Link:</label>
            <input type="url" class="server-type-url" placeholder="https://yourserver.com" />
            <label>Logo:</label>
            <input type="file" class="server-type-logo" accept="image/*" />
            <img class="server-type-logo-preview" src="" style="display:none; max-width:80px;"/>
            <label><input type="checkbox" class="server-type-visible" /> Show</label>
          </div>
          <!-- Slot 2 -->
          <div class="server-type-card">
            <label>Server Name:</label>
            <input type="text" class="server-type-label" placeholder="e.g. RedM RP" value="RedM RP" />
            <label>Server Link:</label>
            <input type="url" class="server-type-url" placeholder="https://yourserver.com" />
            <label>Logo:</label>
            <input type="file" class="server-type-logo" accept="image/*" />
            <img class="server-type-logo-preview" src="" style="display:none; max-width:80px;"/>
            <label><input type="checkbox" class="server-type-visible" /> Show</label>
          </div>
        </div>
        <button class="color-button" onclick="updateServerButtons()">Save Server Buttons</button>
      </div>
      <div id="appsSettingsPanel" class="admin-section" style="display: none;">
        <h3>Apps Settings</h3>
        <p>This section will allow you to manage which viewer-facing apps are available. Placeholder for now.</p>
        <ul>
          <li>ğŸ’¡ App Slot 1 - Placeholder</li>
          <li>ğŸ’¡ App Slot 2 - Placeholder</li>
          <li>ğŸ’¡ App Slot 3 - Placeholder</li>
        </ul>
      </div>
      <div id="gameControlPanel" class="admin-section" style="display: none;">
        <h3>Slot Machine Game Control</h3>
        <div class="admin-flex-row">
          <div>
            <label>Max Level:</label>
            <input id="slotLevelMaxInput" type="number" min="1" max="100" value="10" style="width:60px;">
          </div>
          <div>
            <label>XP Reset:</label>
            <select id="xpResetType">
              <option value="daily">Daily</option>
              <option value="weekly">Weekly</option>
              <option value="event">Custom Days</option>
            </select>
            <input id="xpCustomDays" type="number" style="width:60px;display:none;" min="1" max="365" placeholder="Days"/>
          </div>
        </div>
        <div style="margin-top:18px;">
          <label>Level Rewards:</label>
          <table id="levelRewardTable" style="width:100%;">
            <tr><th>Level</th><th>XP Needed</th><th>Reward</th></tr>
          </table>
        </div>
        <div style="margin-top:25px;">
          <h4>Leaderboard (Demo)</h4>
          <table id="leaderboardTable" style="width:100%;">
            <tr><th>Name</th><th>Spins</th><th>Wins</th><th>Bonus</th><th>XP Level</th></tr>
            <tr><td>MonkeyKing</td><td>124</td><td>18</td><td>12</td><td>5</td></tr>
            <tr><td>ChaosGamer</td><td>110</td><td>11</td><td>8</td><td>4</td></tr>
            <tr><td>NeonQueen</td><td>98</td><td>9</td><td>7</td><td>3</td></tr>
            <tr><td>FakeUser</td><td>80</td><td>7</td><td>5</td><td>2</td></tr>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- RESTORE BUTTON FOR SOLITAIRE -->
  <button id="solitaireRestoreBtn" onclick="restoreSolitaire()" style="display: none;">ğŸƒ</button>

  <!-- SOLITAIRE APP WINDOW -->
  <div id="solitaireWindow" class="app-window" style="display: none;">
    <div class="app-window-header" onmousedown="startDrag(event)">
      <div class="app-window-title">
        <img src="assets/solitaire-icon.png" alt="Solitaire Icon" style="width: 24px; margin-right: 8px;" />
        Solitaire
      </div>
      <div class="app-window-actions">
        <button onclick="closeAppWindow()" title="Minimize">â­˜</button>
        <button onclick="closeAppWindow()" title="Close">âœ–</button>
      </div>
    </div>
    <div class="app-window-body" id="solitaireGameContainer">
      <!-- Solitaire game loads here -->
    </div>
  </div>

  <!-- GAMING PANEL OVERLAY (POPUP) -->
  <div id="gamingPanelOverlay" class="overlay" style="display:none;">
    <div class="game-panel-modal">
      <button id="closeGamingPanel" class="close-btn">&times;</button>
      <h2 class="gaming-panel-title"><span class="panel-icon">ğŸ®</span> Select a Game</h2>
      <div class="games-list">
        <!-- Mini-Games -->
        <div class="games-section">
          <h3><span class="section-emoji">ğŸ•¹ï¸</span> <span class="section-title">Mini-Games</span></h3>
          <div class="games-row">
            <button class="game-list-btn neon-btn neon-pink" id="slotsBtn"><span class="btn-icon">ğŸ’</span> Slots</button>
            <button class="game-list-btn neon-btn neon-cyan" id="diceBtn"><span class="btn-icon">ğŸ²</span> Dice Roll</button>
            <button class="game-list-btn neon-btn neon-gradient" id="wheelBtn"><span class="btn-icon">â„ï¸</span> Wheel Spin</button>
          </div>
        </div>
        <!-- Interactions -->
        <div class="games-section">
          <h3><span class="section-emoji">ğŸ¤</span> <span class="section-title">Interactions</span></h3>
          <div class="games-row">
            <button class="game-list-btn neon-btn neon-cyan" id="soundboardBtn"><span class="btn-icon">ğŸ¼</span> Soundboard</button>
            <button class="game-list-btn neon-btn neon-gradient" id="screenAnimBtn"><span class="btn-icon">ğŸ’¥</span> Screen Animations</button>
            <button class="game-list-btn neon-btn neon-pink" id="pollsBtn"><span class="btn-icon">ğŸ—³ï¸</span> Polls</button>
          </div>
        </div>
        <!-- Battle/PvP -->
        <div class="games-section">
          <h3><span class="section-emoji">âš”ï¸</span> <span class="section-title">Battle / PvP</span></h3>
          <div class="games-row">
            <button class="game-list-btn neon-btn neon-cyan" id="battleRoyaleBtn"><span class="btn-icon">ğŸ†</span> Bits Battle Royale</button>
            <button class="game-list-btn neon-btn neon-pink" id="bossFightBtn"><span class="btn-icon">ğŸ‘¹</span> Boss Fight</button>
          </div>
        </div>
        <!-- Official Extensions -->
        <div class="games-section">
          <h3><span class="section-emoji">ğŸ’</span> <span class="section-title">Official Extensions</span></h3>
          <div class="games-row">
            <button class="game-list-btn neon-btn neon-cyan" id="crowdControlBtn"><span class="btn-icon">ğŸª„</span> Crowd Control</button>
            <button class="game-list-btn neon-btn neon-pink" id="soundAlertsBtn"><span class="btn-icon">ğŸ””</span> Sound Alerts</button>
            <button class="game-list-btn neon-btn neon-gradient" id="bitArcadeBtn"><span class="btn-icon">ğŸ•¹ï¸</span> Bit Arcade</button>
            <button class="game-list-btn neon-btn neon-cyan" id="kappaCasinoBtn"><span class="btn-icon">ğŸ°</span> Kappa Casino</button>
            
        </div>
        </div>
        <!-- Global Games -->
        <div class="games-section">
          <h3><span class="section-emoji">ğŸŒ</span> <span class="section-title">Global Games</span></h3>
           <div class="games-row">
             <button class="game-list-btn neon-btn neon-gradient" id="crateClashBtn">
                  <span class="btn-icon">ğŸ§°</span> Crate Clash
            </button>
        </div>
      </div>
      </div>
    </div>
  </div>

  <!-- STATS APP WINDOW -->
  <div id="statsWindow" class="app-window" style="display: none; position: absolute; top: 200px; left: 300px;">
    <div class="app-window-header" onmousedown="startDrag(event)">
      <span>ğŸ“Š Stats</span>
      <div style="margin-left: auto; display: flex; gap: 10px;">
        <button onclick="closeStatsWindow()" style="color: red;">â­˜</button>
        <button onclick="closeStatsWindow()">âœ–</button>
      </div>
    </div>
    <!-- Custom Stats Panel -->
    <div class="custom-stats-panel" id="customStatsPanel">
      <h4>Choose Your Stats</h4>
      <form id="statsPrefsForm">
        <label><input type="checkbox" name="followage" /> Followed Since</label><br>
        <label><input type="checkbox" name="channelPoints" /> Channel Points</label><br>
        <label><input type="checkbox" name="messagesSent" /> Messages Sent</label><br>
        <label><input type="checkbox" name="badges" /> Badges</label><br>
        <label><input type="checkbox" name="subStatus" /> Sub Status</label><br>
        <label><input type="checkbox" name="viewerNumber" /> Viewer Number</label><br>
        <button type="submit">Save & Show</button>
        <button type="button" onclick="closeCustomStats()">Cancel</button>
      </form>
    </div>
    <div class="app-window-body" id="statsAppContainer" style="background-color: #000; color: #0f0; font-family: 'Fira Mono', monospace;">
      <div id="welcomeMessage" style="margin-bottom: 12px;"></div>
      <div id="cmdTerminal"></div>
      <div style="margin-top: 12px;">
        <button onclick="showBasicStats()">Get Stats</button>
        <button onclick="openCustomStats()">Custom Stats</button>
      </div>
    </div>
  </div>

  <!-- DOCK BAR -->
  <div id="dockBar">
    <button class="dock-btn" data-panel="streamInfoPanel" title="Stream Info">ğŸ¬</button>
    <button class="dock-btn" data-panel="chatPanel" title="Chat">ğŸ’¬</button>
    <button class="dock-btn" data-panel="pollPanel" title="Polls">ğŸ“Š</button>
    <button class="dock-btn" data-panel="linksPanel" title="Links">ğŸ”—</button>
    <button class="dock-btn" data-panel="freeModePanel" id="freeModeDockBtn" title="FreeMode">ğŸ–¥ï¸</button>
    <button id="customizeToggle" title="Customize Layout">ğŸ› ï¸</button>
    <button onclick="showSlotTestPanel()" style="position:fixed;bottom:100px;right:20px;z-index:9999;">Test Slot Panel</button>
  </div>

  <!-- PANELS -->
  <div id="streamInfoPanel" class="panel" style="left: 60px; display: none;">
    <div class="panel-header">Stream Info <button class="close-btn" data-panel="streamInfoPanel">âœ–</button></div>
    <div class="panel-body" id="streamInfoBody"></div>
  </div>

  <div id="chatPanel" class="panel" style="left: 60px; display: none;">
    <div class="panel-header">Chat <button class="close-btn" data-panel="chatPanel">âœ–</button></div>
    <div class="panel-body" id="chatBody">(Chat goes here)</div>
  </div>

  <div id="pollPanel" class="panel" style="left: 60px; display: none;">
    <div class="panel-header">Polls <button class="close-btn" data-panel="pollPanel">âœ–</button></div>
    <div class="panel-body" id="pollBody">(Polls go here)</div>
  </div>

  <div id="linksPanel" class="panel" style="left: 60px; display: none;">
    <div class="panel-header">Links <button class="close-btn" data-panel="linksPanel">âœ–</button></div>
    <div class="panel-body">
      <ul class="links-list" id="popoutLinksList">
        <!-- Links will be dynamically inserted here -->
      </ul>
    </div>
  </div>

  <!-- FreeMode Panel (MUST be outside linksPanel, at root level) -->
  <div id="freeModePanel" class="panel" style="display:none; left:140px; top:80px; min-width:360px;">
    <div class="panel-header" onmousedown="startDrag(event)">FreeMode
      <button class="close-btn" data-panel="freeModePanel">âœ–</button>
    </div>
    <div class="panel-body" id="freeModeBody">
      <div style="margin-bottom:10px;">Drag and resize this panel! Click "Show Stream" below to open your Twitch stream.</div>
      <button id="showTwitchEmbedBtn" onclick="toggleTwitchEmbed()" style="margin-bottom:8px;">Show Stream</button>
      <div id="twitchEmbedPanel" style="display:none; resize:both; overflow:auto; min-width:320px; min-height:180px; border-radius:12px; box-shadow:0 0 8px #00fff7;"></div>
    </div>
  </div>
  <!-- SLOT TEST PANEL (DEV/TEST) -->
  <div id="slotTestPanel" class="panel" style="left:180px; top:70px; display:none; min-width:420px; min-height:540px;">
    <div class="panel-header">
      <span>ğŸ° Slot Machine Test Panel</span>
      <button class="close-btn" data-panel="slotTestPanel">âœ–</button>
    </div>
    <div class="panel-body slot-test-body">
      <!-- New Slot Machine UI -->
      <div class="slot-top-bar">
        <div class="slot-info-group">
          <div class="slot-info-label">Bits</div>
          <div id="slotBitsBalance" class="slot-info-value">1000</div>
        </div>
        <div class="slot-info-group">
          <div class="slot-info-label">Win</div>
          <div id="slotWinAmount" class="slot-info-value">0</div>
        </div>
        <div class="slot-level-group">
          <div class="slot-info-label">Level</div>
          <div id="slotLevelValue" class="slot-info-value">0</div>
        </div>
      </div>
      <div class="slot-xp-meter">
        <span class="slot-label">XP:</span>
        <span id="slotXPCount">0/100</span>
        <div class="slot-xp-bar-bg">
          <div id="slotXPBar" class="slot-xp-bar"></div>
        </div>
      </div>
      <div class="slot-machine-frame">
        <div class="slot-grid" id="slotGrid">
          <!-- 3x3 grid, filled by JS -->
        </div>
        <div class="slot-buttons slot-buttons-layout">
          <button id="slotSpinBtn" class="slot-spin-btn">SPIN</button>
          <div class="slot-turbo-toggle">
            <input type="checkbox" id="slotTurboCheckbox"/>
            <label for="slotTurboCheckbox" style="color:#0ff;">Turbo</label>
          </div>
          <button id="slotBonusBtn" class="slot-bonus-btn">BONUS</button>
        </div>
      </div>
      <div class="slot-help-link">
        <a href="#" onclick="showPanel('helpPanel');return false;">Odds & Game Info</a>
      </div>
    </div>
  </div>
  <!-- Crate Clash Panel -->
<div id="crateClashPanel" class="panel" style="display:none; left:220px; top:110px; min-width:440px; min-height:480px;">
  <div class="panel-header">
    <span>ğŸ§° Crate Clash â€” Crate Opening Game</span>
    <button class="close-btn" data-panel="crateClashPanel">âœ–</button>
  </div>
  <div class="panel-body crate-clash-body">
    <div class="crate-status-row">
      <div>Crates: <span id="crateCount">5</span></div>
      <div>Keys: <span id="keyCount">2</span></div>
      <button id="buyKeyBtn" class="color-button" style="margin-left:12px;">Buy Key (Mock)</button>
    </div>
    <div class="crate-action-row">
      <button id="openCrateBtn" class="color-button">Open Crate</button>
    </div>
    <div id="crateSpinner" class="crate-spinner"></div>
    <div id="crateResult" class="crate-result"></div>
    <h4 style="margin-top:24px;">Your Inventory</h4>
    <div id="crateInventory" class="crate-inventory"></div>
    <div class="crate-odds">
      <h5>Drop Rates:</h5>
      <ul>
        <li>Common: 50%</li>
        <li>Uncommon: 25%</li>
        <li>Rare: 15%</li>
        <li>Epic: 7%</li>
        <li>Legendary: 2.5%</li>
        <li>Collectorâ€™s: 0.5%</li>
      </ul>
    </div>
  </div>
</div>
  <!-- Crate Opening Animation Modal -->
<div id="crateAnimationModal" class="crate-modal-overlay" style="display:none;">
  <div class="crate-modal-bg"></div>
  <div class="crate-modal-content">
    <!-- Chevron/Pyramid Pointer -->
    <div class="crate-pointer">
      <svg width="60" height="32">
        <polygon points="30,4 55,32 5,32" style="fill:url(#grad1);stroke:#0ff;stroke-width:1.5;" />
        <defs>
          <linearGradient id="grad1" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#00fff7" />
            <stop offset="100%" stop-color="#0ff2" />
          </linearGradient>
        </defs>
      </svg>
      <div class="pointer-glow"></div>
      <div class="pointer-beam"></div>
    </div>
    <!-- Reel -->
    <div class="crate-reel-container">
      <div id="crateReel" class="crate-reel"></div>
    </div>
    <!-- Final Item Reveal -->
    <div id="crateReveal" class="crate-reveal"></div>
  </div>
</div>
  <script src="script.js"></script>
</body>
</html>
